\hypertarget{group__uartstdio__api}{}\section{Uartstdio\+\_\+api}
\label{group__uartstdio__api}\index{Uartstdio\+\_\+api@{Uartstdio\+\_\+api}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group__uartstdio__api_gaa413007c81e82b6d58bbbc9414660eae}{U\+A\+R\+T\+Stdio\+Config} (uint32\+\_\+t ui32\+Port\+Num, uint32\+\_\+t ui32\+Baud, uint32\+\_\+t ui32\+Src\+Clock)
\item 
int \hyperlink{group__uartstdio__api_gaf9a30a1e04e8b5b7a9cfc07b56040d72}{U\+A\+R\+Twrite} (const char $\ast$pc\+Buf, uint32\+\_\+t ui32\+Len)
\item 
int \hyperlink{group__uartstdio__api_ga3eb95fa6af501db544ac635fc6eab80b}{U\+A\+R\+Tgets} (char $\ast$pc\+Buf, uint32\+\_\+t ui32\+Len)
\item 
unsigned char \hyperlink{group__uartstdio__api_ga057774397b6eff0d0fd99f4d9790c9db}{U\+A\+R\+Tgetc} (void)
\item 
void \hyperlink{group__uartstdio__api_gac24c8a911d71d799981ea44353f472de}{U\+A\+R\+Tvprintf} (const char $\ast$pc\+String, va\+\_\+list va\+Arg\+P)
\item 
void \hyperlink{group__uartstdio__api_ga9df4748a317174f7cf3c20ffc072abb0}{U\+A\+R\+Tprintf} (const char $\ast$pc\+String,...)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Function Documentation}
\hypertarget{group__uartstdio__api_ga057774397b6eff0d0fd99f4d9790c9db}{}\index{Uartstdio\+\_\+api@{Uartstdio\+\_\+api}!U\+A\+R\+Tgetc@{U\+A\+R\+Tgetc}}
\index{U\+A\+R\+Tgetc@{U\+A\+R\+Tgetc}!Uartstdio\+\_\+api@{Uartstdio\+\_\+api}}
\subsubsection[{U\+A\+R\+Tgetc}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char U\+A\+R\+Tgetc (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{group__uartstdio__api_ga057774397b6eff0d0fd99f4d9790c9db}
Read a single character from the U\+A\+R\+T, blocking if necessary.

This function will receive a single character from the U\+A\+R\+T and store it at the supplied address.

In both buffered and unbuffered modes, this function will block until a character is received. If non-\/blocking operation is required in buffered mode, a call to U\+A\+R\+T\+Rx\+Avail() may be made to determine whether any characters are currently available for reading.

\begin{DoxyReturn}{Returns}
Returns the character read. 
\end{DoxyReturn}
\hypertarget{group__uartstdio__api_ga3eb95fa6af501db544ac635fc6eab80b}{}\index{Uartstdio\+\_\+api@{Uartstdio\+\_\+api}!U\+A\+R\+Tgets@{U\+A\+R\+Tgets}}
\index{U\+A\+R\+Tgets@{U\+A\+R\+Tgets}!Uartstdio\+\_\+api@{Uartstdio\+\_\+api}}
\subsubsection[{U\+A\+R\+Tgets}]{\setlength{\rightskip}{0pt plus 5cm}int U\+A\+R\+Tgets (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pc\+Buf, }
\item[{uint32\+\_\+t}]{ui32\+Len}
\end{DoxyParamCaption}
)}\label{group__uartstdio__api_ga3eb95fa6af501db544ac635fc6eab80b}
A simple U\+A\+R\+T based get string function, with some line processing.


\begin{DoxyParams}{Parameters}
{\em pc\+Buf} & points to a buffer for the incoming string from the U\+A\+R\+T. \\
\hline
{\em ui32\+Len} & is the length of the buffer for storage of the string, including the trailing 0.\\
\hline
\end{DoxyParams}
This function will receive a string from the U\+A\+R\+T input and store the characters in the buffer pointed to by {\itshape pc\+Buf}. The characters will continue to be stored until a termination character is received. The termination characters are C\+R, L\+F, or E\+S\+C. A C\+R\+L\+F pair is treated as a single termination character. The termination characters are not stored in the string. The string will be terminated with a 0 and the function will return.

In both buffered and unbuffered modes, this function will block until a termination character is received. If non-\/blocking operation is required in buffered mode, a call to U\+A\+R\+T\+Peek() may be made to determine whether a termination character already exists in the receive buffer prior to calling \hyperlink{group__uartstdio__api_ga3eb95fa6af501db544ac635fc6eab80b}{U\+A\+R\+Tgets()}.

Since the string will be null terminated, the user must ensure that the buffer is sized to allow for the additional null character.

\begin{DoxyReturn}{Returns}
Returns the count of characters that were stored, not including the trailing 0. 
\end{DoxyReturn}
\hypertarget{group__uartstdio__api_ga9df4748a317174f7cf3c20ffc072abb0}{}\index{Uartstdio\+\_\+api@{Uartstdio\+\_\+api}!U\+A\+R\+Tprintf@{U\+A\+R\+Tprintf}}
\index{U\+A\+R\+Tprintf@{U\+A\+R\+Tprintf}!Uartstdio\+\_\+api@{Uartstdio\+\_\+api}}
\subsubsection[{U\+A\+R\+Tprintf}]{\setlength{\rightskip}{0pt plus 5cm}void U\+A\+R\+Tprintf (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{pc\+String, }
\item[{}]{...}
\end{DoxyParamCaption}
)}\label{group__uartstdio__api_ga9df4748a317174f7cf3c20ffc072abb0}
A simple U\+A\+R\+T based printf function supporting \%c, \%d, \%p, \%s, \%u, \%x, and \%X.


\begin{DoxyParams}{Parameters}
{\em pc\+String} & is the format string. \\
\hline
{\em ...} & are the optional arguments, which depend on the contents of the format string.\\
\hline
\end{DoxyParams}
This function is very similar to the C library {\ttfamily fprintf()} function. All of its output will be sent to the U\+A\+R\+T. Only the following formatting characters are supported\+:


\begin{DoxyItemize}
\item \%c to print a character
\item \%d or \%i to print a decimal value
\item \%s to print a string
\item \%u to print an unsigned decimal value
\item \%x to print a hexadecimal value using lower case letters
\item \%X to print a hexadecimal value using lower case letters (not upper case letters as would typically be used)
\item \%p to print a pointer as a hexadecimal value
\item \%\% to print out a \% character
\end{DoxyItemize}

For \%s, \%d, \%i, \%u, \%p, \%x, and \%X, an optional number may reside between the \% and the format character, which specifies the minimum number of characters to use for that value; if preceded by a 0 then the extra characters will be filled with zeros instead of spaces. For example, {\ttfamily \textbackslash{}\%8d\textquotesingle{}\textquotesingle{} will use eight characters to print the decimal value with spaces added to reach eight;}\%08d\textquotesingle{}\textquotesingle{} will use eight characters as well but will add zeroes instead of spaces.

The type of the arguments after {\itshape pc\+String} must match the requirements of the format string. For example, if an integer was passed where a string was expected, an error of some kind will most likely occur.

\begin{DoxyReturn}{Returns}
None. 
\end{DoxyReturn}
\hypertarget{group__uartstdio__api_gaa413007c81e82b6d58bbbc9414660eae}{}\index{Uartstdio\+\_\+api@{Uartstdio\+\_\+api}!U\+A\+R\+T\+Stdio\+Config@{U\+A\+R\+T\+Stdio\+Config}}
\index{U\+A\+R\+T\+Stdio\+Config@{U\+A\+R\+T\+Stdio\+Config}!Uartstdio\+\_\+api@{Uartstdio\+\_\+api}}
\subsubsection[{U\+A\+R\+T\+Stdio\+Config}]{\setlength{\rightskip}{0pt plus 5cm}void U\+A\+R\+T\+Stdio\+Config (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{ui32\+Port\+Num, }
\item[{uint32\+\_\+t}]{ui32\+Baud, }
\item[{uint32\+\_\+t}]{ui32\+Src\+Clock}
\end{DoxyParamCaption}
)}\label{group__uartstdio__api_gaa413007c81e82b6d58bbbc9414660eae}
Determines whether the ring buffer whose pointers and size are provided is full or not.


\begin{DoxyParams}{Parameters}
{\em pui32\+Read} & points to the read index for the buffer. \\
\hline
{\em pui32\+Write} & points to the write index for the buffer. \\
\hline
{\em ui32\+Size} & is the size of the buffer in bytes.\\
\hline
\end{DoxyParams}
This function is used to determine whether or not a given ring buffer is full. The structure of the code is specifically to ensure that we do not see warnings from the compiler related to the order of volatile accesses being undefined.

\begin{DoxyReturn}{Returns}
Returns {\bfseries true} if the buffer is full or {\bfseries false} otherwise. Determines whether the ring buffer whose pointers and size are provided is empty or not.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em pui32\+Read} & points to the read index for the buffer. \\
\hline
{\em pui32\+Write} & points to the write index for the buffer.\\
\hline
\end{DoxyParams}
This function is used to determine whether or not a given ring buffer is empty. The structure of the code is specifically to ensure that we do not see warnings from the compiler related to the order of volatile accesses being undefined.

\begin{DoxyReturn}{Returns}
Returns {\bfseries true} if the buffer is empty or {\bfseries false} otherwise. Determines the number of bytes of data contained in a ring buffer.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em pui32\+Read} & points to the read index for the buffer. \\
\hline
{\em pui32\+Write} & points to the write index for the buffer. \\
\hline
{\em ui32\+Size} & is the size of the buffer in bytes.\\
\hline
\end{DoxyParams}
This function is used to determine how many bytes of data a given ring buffer currently contains. The structure of the code is specifically to ensure that we do not see warnings from the compiler related to the order of volatile accesses being undefined.

\begin{DoxyReturn}{Returns}
Returns the number of bytes of data currently in the buffer. Configures the U\+A\+R\+T console.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em ui32\+Port\+Num} & is the number of U\+A\+R\+T port to use for the serial console (0-\/2) \\
\hline
{\em ui32\+Baud} & is the bit rate that the U\+A\+R\+T is to be configured to use. \\
\hline
{\em ui32\+Src\+Clock} & is the frequency of the source clock for the U\+A\+R\+T module.\\
\hline
\end{DoxyParams}
This function will configure the specified serial port to be used as a serial console. The serial parameters are set to the baud rate specified by the {\itshape ui32\+Baud} parameter and use 8 bit, no parity, and 1 stop bit.

This function must be called prior to using any of the other U\+A\+R\+T console functions\+: \hyperlink{group__uartstdio__api_ga9df4748a317174f7cf3c20ffc072abb0}{U\+A\+R\+Tprintf()} or \hyperlink{group__uartstdio__api_ga3eb95fa6af501db544ac635fc6eab80b}{U\+A\+R\+Tgets()}. This function assumes that the caller has previously configured the relevant U\+A\+R\+T pins for operation as a U\+A\+R\+T rather than as G\+P\+I\+Os.

\begin{DoxyReturn}{Returns}
None. 
\end{DoxyReturn}
\hypertarget{group__uartstdio__api_gac24c8a911d71d799981ea44353f472de}{}\index{Uartstdio\+\_\+api@{Uartstdio\+\_\+api}!U\+A\+R\+Tvprintf@{U\+A\+R\+Tvprintf}}
\index{U\+A\+R\+Tvprintf@{U\+A\+R\+Tvprintf}!Uartstdio\+\_\+api@{Uartstdio\+\_\+api}}
\subsubsection[{U\+A\+R\+Tvprintf}]{\setlength{\rightskip}{0pt plus 5cm}void U\+A\+R\+Tvprintf (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{pc\+String, }
\item[{va\+\_\+list}]{va\+Arg\+P}
\end{DoxyParamCaption}
)}\label{group__uartstdio__api_gac24c8a911d71d799981ea44353f472de}
A simple U\+A\+R\+T based vprintf function supporting \%c, \%d, \%p, \%s, \%u, \%x, and \%X.


\begin{DoxyParams}{Parameters}
{\em pc\+String} & is the format string. \\
\hline
{\em va\+Arg\+P} & is a variable argument list pointer whose content will depend upon the format string passed in {\itshape pc\+String}.\\
\hline
\end{DoxyParams}
This function is very similar to the C library {\ttfamily vprintf()} function. All of its output will be sent to the U\+A\+R\+T. Only the following formatting characters are supported\+:


\begin{DoxyItemize}
\item \%c to print a character
\item \%d or \%i to print a decimal value
\item \%s to print a string
\item \%u to print an unsigned decimal value
\item \%x to print a hexadecimal value using lower case letters
\item \%X to print a hexadecimal value using lower case letters (not upper case letters as would typically be used)
\item \%p to print a pointer as a hexadecimal value
\item \%\% to print out a \% character
\end{DoxyItemize}

For \%s, \%d, \%i, \%u, \%p, \%x, and \%X, an optional number may reside between the \% and the format character, which specifies the minimum number of characters to use for that value; if preceded by a 0 then the extra characters will be filled with zeros instead of spaces. For example, {\ttfamily \textbackslash{}\%8d\textquotesingle{}\textquotesingle{} will use eight characters to print the decimal value with spaces added to reach eight;}\%08d\textquotesingle{}\textquotesingle{} will use eight characters as well but will add zeroes instead of spaces.

The type of the arguments in the variable arguments list must match the requirements of the format string. For example, if an integer was passed where a string was expected, an error of some kind will most likely occur.

\begin{DoxyReturn}{Returns}
None. 
\end{DoxyReturn}
\hypertarget{group__uartstdio__api_gaf9a30a1e04e8b5b7a9cfc07b56040d72}{}\index{Uartstdio\+\_\+api@{Uartstdio\+\_\+api}!U\+A\+R\+Twrite@{U\+A\+R\+Twrite}}
\index{U\+A\+R\+Twrite@{U\+A\+R\+Twrite}!Uartstdio\+\_\+api@{Uartstdio\+\_\+api}}
\subsubsection[{U\+A\+R\+Twrite}]{\setlength{\rightskip}{0pt plus 5cm}int U\+A\+R\+Twrite (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{pc\+Buf, }
\item[{uint32\+\_\+t}]{ui32\+Len}
\end{DoxyParamCaption}
)}\label{group__uartstdio__api_gaf9a30a1e04e8b5b7a9cfc07b56040d72}
Writes a string of characters to the U\+A\+R\+T output.


\begin{DoxyParams}{Parameters}
{\em pc\+Buf} & points to a buffer containing the string to transmit. \\
\hline
{\em ui32\+Len} & is the length of the string to transmit.\\
\hline
\end{DoxyParams}
This function will transmit the string to the U\+A\+R\+T output. The number of characters transmitted is determined by the {\itshape ui32\+Len} parameter. This function does no interpretation or translation of any characters. Since the output is sent to a U\+A\+R\+T, any L\+F (/n) characters encountered will be replaced with a C\+R\+L\+F pair.

Besides using the {\itshape ui32\+Len} parameter to stop transmitting the string, if a null character (0) is encountered, then no more characters will be transmitted and the function will return.

In non-\/buffered mode, this function is blocking and will not return until all the characters have been written to the output F\+I\+F\+O. In buffered mode, the characters are written to the U\+A\+R\+T transmit buffer and the call returns immediately. If insufficient space remains in the transmit buffer, additional characters are discarded.

\begin{DoxyReturn}{Returns}
Returns the count of characters written. 
\end{DoxyReturn}
